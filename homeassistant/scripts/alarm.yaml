notify_subscribers:
  alias: Notify subscribers by Push notification
  sequence:
    - alias: Send push notification
      service: notify.html5
      data_template:
        title: "{{ title }}"
        message: "{{ message }}"
        data:
          url: https://williamson-ave.duckdns.org

notify_on_alarm:
  alias: Notify on alarm
  sequence:
  - alias: Send push notification
    service: notify.html5
    data_template:
        title: Alarm triggered. The siren will soon sound
        message: "{{ trigger }} has triggered the alarm and in 30 seconds the siren will sound unless you disarm"
        data:
          url: https://williamson-ave.duckdns.org
          actions: 
          - title: Disarm   
            action: disarm_alarm

panic_button:
  alias: Panic button
  sequence:
  - alias: Notify subscribers
    service: script.turn_on
    entity_id: script.notify_on_alarm
    data: 
      variables:
        trigger: The Panic button

alarm_call:
  alias: Call on alarm
  sequence:
  - alias: Call phone
    service: notify.phone
    data:
      message: 'The alarm at home has sounded'
      target:
        - +6421538400